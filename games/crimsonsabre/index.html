<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SAHTE KARAR OYUNU</title>
<style>
body{
  margin:0;
  background:black;
  color:white;
  font-family:Arial;
  text-align:center;
}

.hidden{display:none;}

button{
  padding:10px 22px;
  margin:10px;
  background:#8b0000;
  color:white;
  border:none;
  cursor:pointer;
}
button:hover{background:crimson;}

#imageBox{
  width:90%;
  max-width:1000px;
  height:450px;
  margin:20px auto;
  border:2px solid #333;
  background:black;
}

#imageBox img{
  width:100%;
  height:100%;
  object-fit:contain;
}

#text{
  width:80%;
  margin:auto;
  min-height:120px;
  font-size:17px;
  white-space:pre-line;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu">
  <h1>SAHTE KARAR OYUNU</h1>
  <button onclick="startGame()">‚ñ∂ Ba≈ülat</button>
  <button onclick="openAchievements()">üèÜ Ba≈üarƒ±lar</button>
  <button onclick="exitGame()">‚ùå √áƒ±kƒ±≈ü</button>
</div>

<!-- BA≈ûARILAR -->
<div id="achievements" class="hidden">
  <h2>Ba≈üarƒ±lar</h2>
  <div id="achList"></div>
  <button onclick="backToMenu()">Geri</button>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <div id="imageBox">
    <img id="sceneImage" src="images/room.jpg">
  </div>
  <div id="text"></div>
  <div id="buttons"></div>
</div>

<script>
const menu = document.getElementById("menu");
const game = document.getElementById("game");
const achievementsDiv = document.getElementById("achievements");
const textBox = document.getElementById("text");
const buttons = document.getElementById("buttons");
const img = document.getElementById("sceneImage");

let achievements = {
  escape:false,
  death:false
};

function clearButtons(){
  buttons.innerHTML="";
}

function addButton(text,action){
  const b=document.createElement("button");
  b.innerText=text;
  b.onclick=action;
  buttons.appendChild(b);
}

function typeText(text,callback){
  textBox.innerHTML="";
  let i=0;
  const t=setInterval(()=>{
    textBox.innerHTML+=text[i];
    i++;
    if(i>=text.length){
      clearInterval(t);
      if(callback)callback();
    }
  },20);
}

/* MENU */
function startGame(){
  menu.classList.add("hidden");
  game.classList.remove("hidden");
  windowScene();
}

function exitGame(){
  window.location.href="../../index.html";
}

function openAchievements(){
  menu.classList.add("hidden");
  achievementsDiv.classList.remove("hidden");

  let list="";
  list += achievements.escape ? "‚úÖ Camdan Ka√ßƒ±≈ü" : "C??kmak ‚ùì<br>";
  list += achievements.death ? "‚úÖ √ñl√ºmden Ka√ßƒ±≈ü" : "√ñl√ºm ‚ùì<br>";
  document.getElementById("achList").innerHTML=list;
}

function backToMenu(){
  achievementsDiv.classList.add("hidden");
  menu.classList.remove("hidden");
}

/* B√ñL√úM 1 */
function windowScene(){
  img.src="images/window.jpg";
  clearButtons();
  typeText(
    "Camdan sessizce s√ºz√ºl√ºyorsun.\nAyaklarƒ±n soƒüuk zemine deƒüiyor.\n\nH√¢l√¢ binanƒ±n i√ßindesin.",
    ()=>addButton("Sessizce ilerle",chanceScene)
  );
}

function chanceScene(){
  clearButtons();
  if(Math.random()<0.1){
    typeText(
      "Bir g√∂lge aniden √ºst√ºne √ß√∂k√ºyor.\n'Ses yaptƒ±ƒüƒ±nƒ± sandƒ±n mƒ±?' ‚ò†Ô∏è",
      ()=>addButton("Men√ºye D√∂n",()=>location.reload())
    );
  }else{
    listen1();
  }
}

function listen1(){
  img.src="images/corridor.jpg";
  typeText(
    "Adam 1: 'Bir ≈üeyler ters‚Ä¶ i√ßime sinmiyor.'",
    ()=>addButton("Dinle",listen2)
  );
}

function listen2(){
  clearButtons();
  typeText(
    "Adam 2: 'Onunla mƒ± ilgili diyorsun?\nO dosya kapandƒ± sanƒ±yordum.'",
    ()=>addButton("Dinle",listen3)
  );
}

function listen3(){
  clearButtons();
  typeText(
    "Adam 1: 'Bazƒ± hatalar kapatƒ±lmaz.\n√ñzellikle onun yaptƒ±ƒüƒ±‚Ä¶'",
    ()=>addButton("B√∂l√ºm 2'ye ge√ß",startChapter2)
  );
}

/* B√ñL√úM 2 */
function startChapter2(){
  achievements.escape = true;  // B√∂l√ºm 1 ba≈üarƒ±
  img.src="images/exit.jpg";
  clearButtons();
  typeText(
    "Koridorun sonunda iki kapƒ± var.\nBirisi kilitli, diƒüeri a√ßƒ±k.\n\nSe√ßim yapmalƒ±sƒ±n.",
    ()=>{
      addButton("Kilitli kapƒ±",lockedDoor);
      addButton("A√ßƒ±k kapƒ±",openDoor);
    }
  );
}

function lockedDoor(){
  clearButtons();
  typeText(
    "Kapƒ± kilitli ama birden arkasƒ±ndan adƒ±m sesleri duyuyorsun.\n\n≈ûimdi hƒ±zlƒ± karar ver!",
    ()=>{
      addButton("Pencereye y√∂nel",windowEscape);
      addButton("Kapƒ±nƒ±n altƒ±ndan s√ºr√ºn",crawl);
    }
  );
}

function openDoor(){
  clearButtons();
  typeText(
    "Kapƒ± a√ßƒ±k, ama i√ßerisi karanlƒ±k.\nƒ∞√ßeriden bir nefes sesi geliyor.",
    ()=>{
      addButton("ƒ∞√ßeri gir",enterRoom);
      addButton("Geri d√∂n",lockedDoor);
    }
  );
}

function windowEscape(){
  clearButtons();
  typeText(
    "Pencereye y√∂neliyorsun.\nBu sefer ka√ßmak daha zor‚Ä¶",
    ()=>{
      if(Math.random() < 0.3){
        death();
      } else {
        victory();
      }
    }
  );
}

function crawl(){
  clearButtons();
  typeText(
    "S√ºr√ºnerek ilerliyorsun.\nAdƒ±mlarƒ±n sessiz, ama kalbin hƒ±zlƒ±.",
    ()=>{
      if(Math.random() < 0.2){
        death();
      } else {
        victory();
      }
    }
  );
}

function enterRoom(){
  clearButtons();
  typeText(
    "Odaya giriyorsun.\nƒ∞ki adamƒ±n konu≈ümasƒ± daha net duyuluyor‚Ä¶",
    ()=>{
      if(Math.random() < 0.4){
        death();
      } else {
        victory();
      }
    }
  );
}

function death(){
  clearButtons();
  typeText(
    "Adamlar seni yakaladƒ±.\n\n(√ñl√ºm)\n\nB√∂l√ºm sonu.",
    ()=>{
      achievements.death = false;
      addButton("Men√ºye D√∂n",()=>location.reload());
    }
  );
}

function victory(){
  clearButtons();
  typeText(
    "Ba≈üardƒ±n! Ka√ßmayƒ± ba≈üardƒ±n.\n\n(√ñl√ºmden Ka√ßƒ±≈ü)",
    ()=>{
      achievements.death = true;
      addButton("Men√ºye D√∂n",()=>location.reload());
    }
  );
}
</script>

</body>
</html>
